<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Robota API ë¬¸ì„œ</title>
  <meta name="description" content="Robota API ë¬¸ì„œ">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsify@4/themes/vue.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ¤–</text></svg>">
  <style>
    :root {
      --theme-color: #42b983;
    }
    .markdown-section {
      max-width: 900px;
      padding: 30px;
    }
    .markdown-section code {
      background-color: #f8f8f8;
    }
  </style>
</head>
<body>
  <div class="markdown-section">
    <h1>í•¨ìˆ˜ í˜¸ì¶œ (Function Calling)</h1>
<p>í•¨ìˆ˜ í˜¸ì¶œì€ AI ëª¨ë¸ì´ ì‚¬ì „ ì •ì˜ëœ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆê²Œ í•˜ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ AIëŠ” ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ìƒí˜¸ì‘ìš©í•˜ê³ , ë°ì´í„°ë¥¼ ê²€ìƒ‰í•˜ê±°ë‚˜ ê³„ì‚°ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h2>ê¸°ë³¸ì ì¸ í•¨ìˆ˜ í˜¸ì¶œ</h2>
<p>Robotaì—ì„œ í•¨ìˆ˜ë¥¼ ì •ì˜í•˜ê³  ë“±ë¡í•˜ëŠ” ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:</p>
<pre><code class="language-typescript">import { Robota, OpenAIProvider } from &#39;robota&#39;;
import OpenAI from &#39;openai&#39;;

// OpenAI í´ë¼ì´ì–¸íŠ¸ ìƒì„±
const openaiClient = new OpenAI({
  apiKey: process.env.OPENAI_API_KEY
});

// Robota ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
const robota = new Robota({
  provider: new OpenAIProvider({
    model: &#39;gpt-4&#39;,
    client: openaiClient
  })
});

// í•¨ìˆ˜ ì •ì˜
const functions = {
  // ë‚ ì”¨ ê²€ìƒ‰ í•¨ìˆ˜
  getWeather: async (location: string, unit: &#39;celsius&#39; | &#39;fahrenheit&#39; = &#39;celsius&#39;) =&gt; {
    console.log(`${location}ì˜ ë‚ ì”¨ë¥¼ ${unit} ë‹¨ìœ„ë¡œ ê²€ìƒ‰ ì¤‘...`);
    // ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” ë‚ ì”¨ API í˜¸ì¶œ
    return { 
      temperature: 25, 
      condition: &#39;ë§‘ìŒ&#39;, 
      humidity: 60,
      unit
    };
  },
  
  // ìˆ˜í•™ ê³„ì‚° í•¨ìˆ˜
  calculate: async (expression: string) =&gt; {
    console.log(`ê³„ì‚° ì¤‘: ${expression}`);
    // ì£¼ì˜: evalì€ ë³´ì•ˆìƒ ìœ„í—˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‹¤ì œ ì‚¬ìš©ì‹œ ì•ˆì „í•œ ëŒ€ì•ˆì„ ê³ ë ¤í•˜ì„¸ìš”.
    return { result: eval(expression) };
  }
};

// í•¨ìˆ˜ ë“±ë¡
robota.registerFunctions(functions);

// ì‹¤í–‰
const result = await robota.run(&#39;ì„œìš¸ì˜ ë‚ ì”¨ê°€ ì–´ë–¤ì§€ ì•Œë ¤ì£¼ê³ , 25 + 15ì˜ ê³„ì‚° ê²°ê³¼ë„ ë³´ì—¬ì¤˜.&#39;);
console.log(result);
</code></pre>
<h2>í•¨ìˆ˜ ìŠ¤í‚¤ë§ˆ ìë™ ì¶”ì¶œ</h2>
<p>RobotaëŠ” íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì˜ íƒ€ì… ì •ë³´ë¥¼ ì‚¬ìš©í•˜ì—¬ í•¨ìˆ˜ì˜ ë§¤ê°œë³€ìˆ˜ì™€ ë°˜í™˜ íƒ€ì…ì— ëŒ€í•œ ìŠ¤í‚¤ë§ˆë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤. ì´ë ‡ê²Œ ìƒì„±ëœ ìŠ¤í‚¤ë§ˆëŠ” AI ëª¨ë¸ì—ê²Œ í•¨ìˆ˜ì˜ ì‚¬ìš©ë²•ì„ ì•Œë ¤ì£¼ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.</p>
<h2>ë³µì¡í•œ ë§¤ê°œë³€ìˆ˜ë¥¼ ê°€ì§„ í•¨ìˆ˜</h2>
<p>ê°ì²´ë‚˜ ë°°ì—´ê³¼ ê°™ì€ ë³µì¡í•œ ë§¤ê°œë³€ìˆ˜ë¥¼ ê°€ì§„ í•¨ìˆ˜ë„ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>
<pre><code class="language-typescript">// ë³µì¡í•œ ë§¤ê°œë³€ìˆ˜ë¥¼ ê°€ì§„ í•¨ìˆ˜
const functions = {
  createUser: async (userData: {
    name: string;
    email: string;
    age: number;
    preferences?: {
      theme: &#39;light&#39; | &#39;dark&#39;;
      notifications: boolean;
    }
  }) =&gt; {
    console.log(`ì‚¬ìš©ì ìƒì„± ì¤‘: ${userData.name}`);
    return { 
      id: &#39;user-123&#39;,
      createdAt: new Date().toISOString(),
      ...userData
    };
  }
};

robota.registerFunctions(functions);
</code></pre>
<h2>zodë¥¼ ì‚¬ìš©í•œ ìŠ¤í‚¤ë§ˆ ê²€ì¦</h2>
<p>ë³´ë‹¤ ê°•ë ¥í•œ ë§¤ê°œë³€ìˆ˜ ê²€ì¦ì„ ìœ„í•´ <code>zod</code> ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>
<pre><code class="language-typescript">import { z } from &#39;zod&#39;;
import { Robota, OpenAIProvider, createFunction } from &#39;robota&#39;;

// zod ìŠ¤í‚¤ë§ˆë¥¼ ì‚¬ìš©í•œ í•¨ìˆ˜ ìƒì„±
const sendEmail = createFunction({
  name: &#39;sendEmail&#39;,
  description: &#39;ì§€ì •ëœ ìˆ˜ì‹ ìì—ê²Œ ì´ë©”ì¼ì„ ë³´ëƒ…ë‹ˆë‹¤&#39;,
  parameters: z.object({
    to: z.string().email(&#39;ìœ íš¨í•œ ì´ë©”ì¼ ì£¼ì†Œê°€ í•„ìš”í•©ë‹ˆë‹¤&#39;),
    subject: z.string().min(1, &#39;ì œëª©ì€ ë¹„ì–´ìˆì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤&#39;),
    body: z.string(),
    cc: z.array(z.string().email()).optional(),
    bcc: z.array(z.string().email()).optional(),
    attachments: z.array(z.string().url()).optional()
  }),
  execute: async (params) =&gt; {
    console.log(`ì´ë©”ì¼ ì „ì†¡ ì¤‘: ${params.subject}`);
    // ì‹¤ì œ ì´ë©”ì¼ ì „ì†¡ ë¡œì§
    return { 
      status: &#39;sent&#39;,
      messageId: &#39;msg-&#39; + Math.random().toString(36).substring(2, 9)
    };
  }
});

const robota = new Robota({
  provider: new OpenAIProvider({
    apiKey: process.env.OPENAI_API_KEY,
    model: &#39;gpt-4&#39;
  })
});

// í•¨ìˆ˜ ë“±ë¡
robota.registerFunctions({ sendEmail });
</code></pre>
<h2>í•¨ìˆ˜ í˜¸ì¶œ ëª¨ë“œ</h2>
<p>RobotaëŠ” ë‹¤ì–‘í•œ í•¨ìˆ˜ í˜¸ì¶œ ëª¨ë“œë¥¼ ì§€ì›í•©ë‹ˆë‹¤:</p>
<h3>ìë™ ëª¨ë“œ (ê¸°ë³¸ê°’)</h3>
<p>AIê°€ í•„ìš”ì— ë”°ë¼ í•¨ìˆ˜ë¥¼ ìë™ìœ¼ë¡œ í˜¸ì¶œí•©ë‹ˆë‹¤:</p>
<pre><code class="language-typescript">// ê°œë³„ í˜¸ì¶œì—ì„œ ì„¤ì •
const result = await robota.run(&#39;ë‚´ì¼ ì„œìš¸ì˜ ë‚ ì”¨ê°€ ì–´ë–¤ì§€ ì•Œë ¤ì¤˜&#39;, {
  functionCallMode: &#39;auto&#39; // ê¸°ë³¸ê°’ì´ë¯€ë¡œ ìƒëµ ê°€ëŠ¥
});

// ì „ì—­ ì„¤ì •
robota.setFunctionCallMode(&#39;auto&#39;);
</code></pre>
<h3>ê°•ì œ ëª¨ë“œ</h3>
<p>íŠ¹ì • í•¨ìˆ˜ë¥¼ ê°•ì œë¡œ í˜¸ì¶œí•˜ë„ë¡ ì§€ì‹œí•©ë‹ˆë‹¤:</p>
<pre><code class="language-typescript">// ê°œë³„ í˜¸ì¶œì—ì„œ ì„¤ì •
const result = await robota.run(&#39;ë‚´ì¼ ì„œìš¸ì˜ ë‚ ì”¨ê°€ ì–´ë–¤ì§€ ì•Œë ¤ì¤˜&#39;, {
  functionCallMode: &#39;force&#39;,
  forcedFunction: &#39;getWeather&#39;,
  forcedArguments: { location: &#39;ì„œìš¸&#39;, unit: &#39;celsius&#39; }
});

// ì „ì—­ ì„¤ì • + ê°œë³„ í˜¸ì¶œì—ì„œ í•¨ìˆ˜ ì§€ì •
robota.setFunctionCallMode(&#39;force&#39;);
const result = await robota.run(&#39;ì•„ë¬´ ë‚´ìš©&#39;, {
  forcedFunction: &#39;getWeather&#39;,
  forcedArguments: { location: &#39;ì„œìš¸&#39; }
});
</code></pre>
<h3>ë¹„í™œì„±í™” ëª¨ë“œ</h3>
<p>í•¨ìˆ˜ í˜¸ì¶œì„ ì™„ì „íˆ ë¹„í™œì„±í™”í•©ë‹ˆë‹¤:</p>
<pre><code class="language-typescript">// ê°œë³„ í˜¸ì¶œì—ì„œ ì„¤ì •
const result = await robota.run(&#39;ì•ˆë…•í•˜ì„¸ìš”!&#39;, {
  functionCallMode: &#39;disabled&#39;
});

// ì „ì—­ ì„¤ì •
robota.setFunctionCallMode(&#39;disabled&#39;);
</code></pre>
<h2>í•¨ìˆ˜ í˜¸ì¶œ ì¶”ì  ë° ë¡œê¹…</h2>
<p>í•¨ìˆ˜ í˜¸ì¶œì„ ì¶”ì í•˜ê³  ë¡œê¹…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>
<pre><code class="language-typescript">const robota = new Robota({
  provider: new OpenAIProvider({
    model: &#39;gpt-4&#39;,
    client: openaiClient
  }),
  onFunctionCall: (functionName, args, result) =&gt; {
    console.log(`í•¨ìˆ˜ í˜¸ì¶œ: ${functionName}`);
    console.log(&#39;ì¸ì:&#39;, args);
    console.log(&#39;ê²°ê³¼:&#39;, result);
  }
});
</code></pre>
<h2>í•¨ìˆ˜ í˜¸ì¶œ ì„¤ì • ê´€ë¦¬</h2>
<p>ë³´ì•ˆê³¼ ì•ˆì „ì„±ì„ ìœ„í•´ í•¨ìˆ˜ í˜¸ì¶œì— ì „ì—­ ì„¤ì •ì„ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>
<pre><code class="language-typescript">// ì´ˆê¸°í™” ì‹œ ì„¤ì •
const robota = new Robota({
  provider: new OpenAIProvider({
    model: &#39;gpt-4&#39;,
    client: openaiClient
  }),
  functionCallConfig: {
    maxCalls: 5, // ìµœëŒ€ í•¨ìˆ˜ í˜¸ì¶œ íšŸìˆ˜
    timeout: 10000, // í•¨ìˆ˜ í˜¸ì¶œ íƒ€ì„ì•„ì›ƒ (ms)
    allowedFunctions: [&#39;getWeather&#39;, &#39;calculate&#39;], // í—ˆìš©ëœ í•¨ìˆ˜ ëª©ë¡
    defaultMode: &#39;auto&#39; // ê¸°ë³¸ í•¨ìˆ˜ í˜¸ì¶œ ëª¨ë“œ
  }
});

// ë‚˜ì¤‘ì— ì„¤ì • ë³€ê²½
robota.configureFunctionCall({
  mode: &#39;auto&#39;,
  maxCalls: 10,
  timeout: 15000,
  allowedFunctions: [&#39;getWeather&#39;, &#39;calculate&#39;, &#39;searchDatabase&#39;]
});
</code></pre>
<p>í•¨ìˆ˜ í˜¸ì¶œ ëª¨ë“œë§Œ ë³€ê²½í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤:</p>
<pre><code class="language-typescript">robota.setFunctionCallMode(&#39;auto&#39;); // &#39;auto&#39;, &#39;disabled&#39;, &#39;force&#39; ì¤‘ í•˜ë‚˜ ì„ íƒ
</code></pre>

  </div>
</body>
</html>