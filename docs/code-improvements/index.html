<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/robota/_next/static/css/825b8367eaa548fa.css" crossorigin="" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/robota/_next/static/chunks/webpack-ebe91eed80c19fce.js" crossorigin=""/><script src="/robota/_next/static/chunks/91d61263-e64470261eb4073c.js" async="" crossorigin=""></script><script src="/robota/_next/static/chunks/269-4ab65b60f387a019.js" async="" crossorigin=""></script><script src="/robota/_next/static/chunks/main-app-3f1d8b4f0c96edf4.js" async="" crossorigin=""></script><script src="/robota/_next/static/chunks/558-671780cd7fdea0cf.js" async=""></script><script src="/robota/_next/static/chunks/app/docs/layout-a14e5073c8ff962f.js" async=""></script><script src="/robota/_next/static/chunks/app/not-found-174254f1113620b0.js" async=""></script><title>code improvements - Robota</title><meta name="description" content="Robota 문서 및 API 참조"/><script src="/robota/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js" crossorigin="" noModule=""></script></head><body><main class="container mx-auto px-4 py-8"><header class="bg-white border-b border-gray-200 py-4 sticky top-0 z-10"><div class="container mx-auto px-4 flex justify-between items-center"><a class="text-2xl font-bold text-blue-600" href="/robota/">Robota</a><nav><ul class="flex space-x-6"><li><a class="font-semibold text-blue-600" href="/robota/docs/">문서</a></li><li><a href="https://github.com/jungyoun/robota" target="_blank" rel="noopener noreferrer" class="text-gray-700 hover:text-blue-600">GitHub</a></li></ul></nav></div></header><div class="container mx-auto px-4 py-8 flex"><div class="w-64 pr-8"><nav class="sticky top-8"><ul class="space-y-2"><li><div class="flex items-center mb-2"><a class="text-gray-700 hover:text-blue-600" href="/robota/">홈</a></div></li><li><div class="flex items-center mb-2"><a class="text-gray-700 hover:text-blue-600" href="/robota/docs/getting-started/">시작하기</a></div></li><li><div class="flex items-center mb-2"><a class="text-gray-700 hover:text-blue-600" href="/robota/docs/core-concepts/">핵심 개념</a></div></li><li><div class="flex items-center mb-2"><button class="mr-1 w-5 text-gray-500 hover:text-gray-700" aria-label="펼치기">▶</button><a class="text-gray-700 hover:text-blue-600" href="/robota/docs/api-reference/">API 참조</a></div></li><li><div class="flex items-center mb-2"><button class="mr-1 w-5 text-gray-500 hover:text-gray-700" aria-label="펼치기">▶</button><a class="text-gray-700 hover:text-blue-600" href="/robota/docs/providers/">AI 제공자</a></div></li><li><div class="flex items-center mb-2"><button class="mr-1 w-5 text-gray-500 hover:text-gray-700" aria-label="펼치기">▶</button><a class="text-gray-700 hover:text-blue-600" href="/robota/docs/protocols/">프로토콜</a></div></li><li><div class="flex items-center mb-2"><a class="text-gray-700 hover:text-blue-600" href="/robota/docs/function-calling/">함수 호출</a></div></li><li><div class="flex items-center mb-2"><a class="text-gray-700 hover:text-blue-600" href="/robota/docs/system-messages/">시스템 메시지</a></div></li><li><div class="flex items-center mb-2"><a class="text-gray-700 hover:text-blue-600" href="/robota/docs/code-improvements/">코드 개선사항</a></div></li><li><div class="flex items-center mb-2"><a class="text-gray-700 hover:text-blue-600" href="/robota/docs/openapi-integration/">OpenAPI 통합</a></div></li></ul></nav></div><div class="flex-1 min-w-0"><div class="markdown-content"><article class="markdown-content"><h1 id="코드-개선사항"><a href="#코드-개선사항">코드 개선사항</a></h1>
<p>Robota 라이브러리는 지속적인 개선을 통해 코드 품질과 개발자 경험을 향상시키고 있습니다. 이 문서에서는 최근 리팩토링 및 코드 개선 작업에 대한 상세 내용을 제공합니다.</p>
<h2 id="구조적-개선사항"><a href="#구조적-개선사항">구조적 개선사항</a></h2>
<h3 id="모듈화-및-분리"><a href="#모듈화-및-분리">모듈화 및 분리</a></h3>
<p>코드베이스는 다음과 같이 논리적으로 분리되어 있습니다:</p>
<pre><code>packages/
├── core/               # 핵심 기능
│   ├── robota.ts       # 메인 클래스 
│   ├── memory.ts       # 메모리 관리
│   ├── types.ts        # 타입 정의
│   └── ...
├── openai/             # OpenAI 통합
├── anthropic/          # Anthropic 통합
├── tools/              # 도구 시스템
└── ...
</code></pre>
<p>이러한 모듈화는 다음과 같은 이점을 제공합니다:</p>
<ol>
<li><strong>코드 재사용성</strong>: 공통 기능이 적절히 분리되어 중복 코드가 감소했습니다.</li>
<li><strong>유지보수성</strong>: 한 모듈의 변경이 다른 모듈에 미치는 영향이 최소화되었습니다.</li>
<li><strong>테스트 용이성</strong>: 독립적인 모듈은 단위 테스트가 용이합니다.</li>
<li><strong>번들 크기 최적화</strong>: 사용자는 필요한 모듈만 가져와서 번들 크기를 최적화할 수 있습니다.</li>
</ol>
<h3 id="인터페이스-개선"><a href="#인터페이스-개선">인터페이스 개선</a></h3>
<p>핵심 인터페이스들이 다음과 같이 개선되었습니다:</p>
<ol>
<li><strong>ModelContextProtocol</strong>: AI 모델과의 통신을 위한 표준화된, 확장 가능한 인터페이스 제공</li>
<li><strong>Memory</strong>: 대화 기록 관리를 위한 명확한 계약 정의</li>
<li><strong>Tool</strong>: 도구 정의 및 실행을 위한 확장 가능한 인터페이스</li>
</ol>
<h2 id="타입-시스템-개선"><a href="#타입-시스템-개선">타입 시스템 개선</a></h2>
<h3 id="제네릭-타입-도입"><a href="#제네릭-타입-도입">제네릭 타입 도입</a></h3>
<pre><code class="language-typescript">// 이전:
interface Tool {
  name: string;
  description?: string;
  execute: (...args: any[]) =&gt; Promise&lt;any&gt;;
}

// 개선:
interface Tool&lt;TInput = any, TOutput = any&gt; {
  name: string;
  description?: string;
  parameters?: ToolParameter[];
  execute: (input: TInput) =&gt; Promise&lt;ToolResult&lt;TOutput&gt;&gt;;
}
</code></pre>
<h3 id="명시적-타입-검사-추가"><a href="#명시적-타입-검사-추가">명시적 타입 검사 추가</a></h3>
<pre><code class="language-typescript">// 함수 매개변수 유효성 검사
registerFunction(schema: FunctionSchema, fn: Function): void {
  if (!schema || !schema.name) {
    throw new Error(&#x27;유효한 함수 스키마가 필요합니다.&#x27;);
  }
  if (typeof fn !== &#x27;function&#x27;) {
    throw new Error(&#x27;두 번째 인자는 함수여야 합니다.&#x27;);
  }
  
  // 구현...
}
</code></pre>
<h2 id="코드-가독성-개선"><a href="#코드-가독성-개선">코드 가독성 개선</a></h2>
<h3 id="주석-및-문서화"><a href="#주석-및-문서화">주석 및 문서화</a></h3>
<p>모든 주요 클래스, 메서드, 및 프로퍼티에 JSDoc 주석을 추가하였습니다:</p>
<pre><code class="language-typescript">/**
 * 특정 위치의 날씨 정보를 가져오는 도구
 * 
 * @example
 * ```ts
 * const weatherTool = createTool({
 *   name: &#x27;getWeather&#x27;,
 *   description: &#x27;특정 위치의 날씨를 조회합니다&#x27;,
 *   // ... 코드 생략
 * });
 * ```
 */
</code></pre>
<h3 id="일관된-메서드-그룹화"><a href="#일관된-메서드-그룹화">일관된 메서드 그룹화</a></h3>
<p>관련 메서드를 논리적 그룹으로 분류하여 코드 구조를 명확하게 했습니다:</p>
<pre><code class="language-typescript">class Robota {
  // 시스템 메시지 관리
  setSystemPrompt() { /* ... */ }
  setSystemMessages() { /* ... */ }
  addSystemMessage() { /* ... */ }
  
  // 함수 호출 관리
  setFunctionCallMode() { /* ... */ }
  configureFunctionCall() { /* ... */ }
  registerFunction() { /* ... */ }
  
  // 실행 메서드
  run() { /* ... */ }
  chat() { /* ... */ }
  
  // 내부 헬퍼 메서드
  private prepareContext() { /* ... */ }
  private handleFunctionCall() { /* ... */ }
}
</code></pre>
<h2 id="에러-처리-개선"><a href="#에러-처리-개선">에러 처리 개선</a></h2>
<p>에러 처리가 다양한 상황에서 더 구체적이고 유용한 피드백을 제공하도록 개선되었습니다:</p>
<pre><code class="language-typescript">async handleFunctionCall(response, context, options): Promise&lt;string&gt; {
  if (!response.functionCall || !response.functionCall.name) {
    throw new Error(&#x27;함수 호출 정보가 누락되었습니다.&#x27;);
  }

  const functionName = response.functionCall.name;
  const fn = this.functions[functionName];

  if (!fn) {
    throw new Error(`함수 &#x27;${functionName}&#x27;이(가) 등록되지 않았습니다.`);
  }
  
  try {
    // 함수 실행...
  } catch (error) {
    console.error(`함수 &#x27;${functionName}&#x27; 실행 중 오류 발생:`, error);
    throw error;
  }
}
</code></pre>
<h2 id="테스트-개선"><a href="#테스트-개선">테스트 개선</a></h2>
<h3 id="테스트-위치-및-구조"><a href="#테스트-위치-및-구조">테스트 위치 및 구조</a></h3>
<p>테스트 파일은 해당 구현 파일과 함께 배치하여 관리가 용이하도록 하였습니다:</p>
<pre><code>packages/core/src/
  ├── memory.ts
  ├── memory.test.ts  // memory.ts에 대한 테스트
  ├── robota.ts
  └── robota.test.ts  // robota.ts에 대한 테스트
</code></pre>
<h3 id="테스트-범위-확대"><a href="#테스트-범위-확대">테스트 범위 확대</a></h3>
<p>다음 영역에서 테스트 커버리지가 향상되었습니다:</p>
<ol>
<li><strong>에지 케이스</strong>: 비정상적인 입력과 경계 조건에 대한 테스트</li>
<li><strong>오류 상황</strong>: 예외 발생 시 올바르게 처리되는지 확인</li>
<li><strong>통합 테스트</strong>: 여러 컴포넌트가 함께 작동하는 시나리오 테스트</li>
</ol>
<h2 id="api-디자인-개선"><a href="#api-디자인-개선">API 디자인 개선</a></h2>
<h3 id="일관된-명명-규칙"><a href="#일관된-명명-규칙">일관된 명명 규칙</a></h3>
<p>모든 API는 일관된 명명 규칙을 따릅니다:</p>
<ul>
<li>클래스: PascalCase (예: <code>OpenAIProvider</code>)</li>
<li>메서드: camelCase (예: <code>registerFunction</code>, <code>setSystemPrompt</code>)</li>
<li>상수: UPPER_SNAKE_CASE (예: <code>DEFAULT_TIMEOUT</code>, <code>MAX_TOKENS</code>)</li>
<li>타입/인터페이스: PascalCase (예: <code>ToolResult</code>, <code>FunctionSchema</code>)</li>
</ul>
<h3 id="메서드-체이닝-지원"><a href="#메서드-체이닝-지원">메서드 체이닝 지원</a></h3>
<pre><code class="language-typescript">// 이전:
toolRegistry.register(tool1);
toolRegistry.register(tool2);

// 개선:
toolRegistry
  .register(tool1)
  .register(tool2);
</code></pre>
<h2 id="성능-개선"><a href="#성능-개선">성능 개선</a></h2>
<h3 id="메모리-최적화"><a href="#메모리-최적화">메모리 최적화</a></h3>
<p>메모리 관리 시스템이 개선되어 대화 기록을 효율적으로 저장하고 검색할 수 있습니다:</p>
<pre><code class="language-typescript">class SimpleMemory implements Memory {
  private messages: Message[] = [];
  private maxMessages: number;
  
  constructor(options?: { maxMessages?: number }) {
    this.maxMessages = options?.maxMessages || 0;
  }
  
  addMessage(message: Message): void {
    this.messages.push(message);
    
    // 최대 메시지 수 제한 적용
    if (this.maxMessages &gt; 0 &amp;&amp; this.messages.length &gt; this.maxMessages) {
      // 시스템 메시지는 항상 유지
      const systemMessages = this.messages.filter(m =&gt; m.role === &#x27;system&#x27;);
      const nonSystemMessages = this.messages.filter(m =&gt; m.role !== &#x27;system&#x27;);
      
      // 비시스템 메시지만 잘라냄
      const remainingCount = this.maxMessages - systemMessages.length;
      const trimmedNonSystemMessages = nonSystemMessages.slice(-remainingCount);
      
      // 시스템 메시지와 잘라낸 비시스템 메시지 합치기
      this.messages = [...systemMessages, ...trimmedNonSystemMessages];
    }
  }
}
</code></pre>
<h2 id="결론"><a href="#결론">결론</a></h2>
<p>이러한 코드 개선을 통해 Robota 라이브러리는 다음과 같은 이점을 제공합니다:</p>
<ol>
<li><strong>더 나은 개발자 경험</strong>: 직관적인 API와 명확한 문서화</li>
<li><strong>향상된 타입 안전성</strong>: 컴파일 타임에 오류 발견</li>
<li><strong>더 높은 코드 품질</strong>: 일관된 스타일과 설계 원칙</li>
<li><strong>확장성</strong>: 새로운 기능과 통합을 쉽게 추가할 수 있음</li>
<li><strong>유지보수성</strong>: 명확한 모듈 경계와 책임 분리</li>
</ol>
<p>향후 개발 계획에는 추가 최적화, 더 많은 제공업체 지원, 그리고 고급 기능의 구현이 포함되어 있습니다.</p></article></div></div></div></main><script src="/robota/_next/static/chunks/webpack-ebe91eed80c19fce.js" crossorigin="" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/robota/_next/static/css/825b8367eaa548fa.css\",\"style\",{\"crossOrigin\":\"\"}]\n0:\"$L2\"\n"])</script><script>self.__next_f.push([1,"3:I[2121,[],\"\"]\n6:I[6601,[],\"\"]\n8:I[7078,[],\"\"]\n9:I[7065,[\"558\",\"static/chunks/558-671780cd7fdea0cf.js\",\"998\",\"static/chunks/app/docs/layout-a14e5073c8ff962f.js\"],\"\"]\na:I[7306,[\"558\",\"static/chunks/558-671780cd7fdea0cf.js\",\"998\",\"static/chunks/app/docs/layout-a14e5073c8ff962f.js\"],\"\"]\nb:I[4561,[\"558\",\"static/chunks/558-671780cd7fdea0cf.js\",\"160\",\"static/chunks/app/not-found-174254f1113620b0.js\"],\"\"]\nd:I[8306,[],\"\"]\n7:[\"slug\",\"code-improvements\",\"c\"]\n"])</script><script>self.__next_f.push([1,"2:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/robota/_next/static/css/825b8367eaa548fa.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]],[\"$\",\"$L3\",null,{\"buildId\":\"ZZutAbQGoS9ZHc25loZRL\",\"assetPrefix\":\"/robota\",\"initialCanonicalUrl\":\"/docs/code-improvements/\",\"initialTree\":[\"\",{\"children\":[\"docs\",{\"children\":[[\"slug\",\"code-improvements\",\"c\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":[\\\"code-improvements\\\"]}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"docs\",{\"children\":[[\"slug\",\"code-improvements\",\"c\"],{\"children\":[\"__PAGE__\",{},[\"$L4\",\"$L5\",null]]},[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"docs\",\"children\",\"$7\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L8\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}]]},[null,[[\"$\",\"$L9\",null,{}],[\"$\",\"div\",null,{\"className\":\"container mx-auto px-4 py-8 flex\",\"children\":[[\"$\",\"$La\",null,{}],[\"$\",\"div\",null,{\"className\":\"flex-1 min-w-0\",\"children\":[\"$\",\"div\",null,{\"className\":\"markdown-content\",\"children\":[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"docs\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L8\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}]}]}]]}]],null]]},[null,[\"$\",\"html\",null,{\"lang\":\"ko\",\"children\":[\"$\",\"body\",null,{\"children\":[\"$\",\"main\",null,{\"className\":\"container mx-auto px-4 py-8\",\"children\":[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L8\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"$L9\",null,{}],[\"$\",\"div\",null,{\"className\":\"container mx-auto px-4 py-16 text-center\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"text-5xl font-bold mb-6\",\"children\":\"404\"}],[\"$\",\"p\",null,{\"className\":\"text-xl mb-8\",\"children\":\"페이지를 찾을 수 없습니다.\"}],[\"$\",\"$Lb\",null,{\"href\":\"/\",\"className\":\"bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors\",\"children\":\"홈으로 돌아가기\"}]]}]],\"notFoundStyles\":[],\"styles\":null}]}]}]}],null]],\"initialHead\":[false,\"$Lc\"],\"globalErrorComponent\":\"$d\"}]]\n"])</script><script>self.__next_f.push([1,"5:[\"$\",\"article\",null,{\"className\":\"markdown-content\",\"children\":[false,[[\"$\",\"h1\",null,{\"id\":\"코드-개선사항\",\"children\":[\"$\",\"a\",null,{\"href\":\"#코드-개선사항\",\"children\":\"코드 개선사항\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Robota 라이브러리는 지속적인 개선을 통해 코드 품질과 개발자 경험을 향상시키고 있습니다. 이 문서에서는 최근 리팩토링 및 코드 개선 작업에 대한 상세 내용을 제공합니다.\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"구조적-개선사항\",\"children\":[\"$\",\"a\",null,{\"href\":\"#구조적-개선사항\",\"children\":\"구조적 개선사항\"}]}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"모듈화-및-분리\",\"children\":[\"$\",\"a\",null,{\"href\":\"#모듈화-및-분리\",\"children\":\"모듈화 및 분리\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"코드베이스는 다음과 같이 논리적으로 분리되어 있습니다:\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"packages/\\n├── core/               # 핵심 기능\\n│   ├── robota.ts       # 메인 클래스 \\n│   ├── memory.ts       # 메모리 관리\\n│   ├── types.ts        # 타입 정의\\n│   └── ...\\n├── openai/             # OpenAI 통합\\n├── anthropic/          # Anthropic 통합\\n├── tools/              # 도구 시스템\\n└── ...\\n\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"이러한 모듈화는 다음과 같은 이점을 제공합니다:\"}],\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"코드 재사용성\"}],\": 공통 기능이 적절히 분리되어 중복 코드가 감소했습니다.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"유지보수성\"}],\": 한 모듈의 변경이 다른 모듈에 미치는 영향이 최소화되었습니다.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"테스트 용이성\"}],\": 독립적인 모듈은 단위 테스트가 용이합니다.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"번들 크기 최적화\"}],\": 사용자는 필요한 모듈만 가져와서 번들 크기를 최적화할 수 있습니다.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"인터페이스-개선\",\"children\":[\"$\",\"a\",null,{\"href\":\"#인터페이스-개선\",\"children\":\"인터페이스 개선\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"핵심 인터페이스들이 다음과 같이 개선되었습니다:\"}],\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"ModelContextProtocol\"}],\": AI 모델과의 통신을 위한 표준화된, 확장 가능한 인터페이스 제공\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Memory\"}],\": 대화 기록 관리를 위한 명확한 계약 정의\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Tool\"}],\": 도구 정의 및 실행을 위한 확장 가능한 인터페이스\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"타입-시스템-개선\",\"children\":[\"$\",\"a\",null,{\"href\":\"#타입-시스템-개선\",\"children\":\"타입 시스템 개선\"}]}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"제네릭-타입-도입\",\"children\":[\"$\",\"a\",null,{\"href\":\"#제네릭-타입-도입\",\"children\":\"제네릭 타입 도입\"}]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"// 이전:\\ninterface Tool {\\n  name: string;\\n  description?: string;\\n  execute: (...args: any[]) =\u003e Promise\u003cany\u003e;\\n}\\n\\n// 개선:\\ninterface Tool\u003cTInput = any, TOutput = any\u003e {\\n  name: string;\\n  description?: string;\\n  parameters?: ToolParameter[];\\n  execute: (input: TInput) =\u003e Promise\u003cToolResult\u003cTOutput\u003e\u003e;\\n}\\n\"}]}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"명시적-타입-검사-추가\",\"children\":[\"$\",\"a\",null,{\"href\":\"#명시적-타입-검사-추가\",\"children\":\"명시적 타입 검사 추가\"}]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"// 함수 매개변수 유효성 검사\\nregisterFunction(schema: FunctionSchema, fn: Function): void {\\n  if (!schema || !schema.name) {\\n    throw new Error('유효한 함수 스키마가 필요합니다.');\\n  }\\n  if (typeof fn !== 'function') {\\n    throw new Error('두 번째 인자는 함수여야 합니다.');\\n  }\\n  \\n  // 구현...\\n}\\n\"}]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"코드-가독성-개선\",\"children\":[\"$\",\"a\",null,{\"href\":\"#코드-가독성-개선\",\"children\":\"코드 가독성 개선\"}]}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"주석-및-문서화\",\"children\":[\"$\",\"a\",null,{\"href\":\"#주석-및-문서화\",\"children\":\"주석 및 문서화\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"모든 주요 클래스, 메서드, 및 프로퍼티에 JSDoc 주석을 추가하였습니다:\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"/**\\n * 특정 위치의 날씨 정보를 가져오는 도구\\n * \\n * @example\\n * ```ts\\n * const weatherTool = createTool({\\n *   name: 'getWeather',\\n *   description: '특정 위치의 날씨를 조회합니다',\\n *   // ... 코드 생략\\n * });\\n * ```\\n */\\n\"}]}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"일관된-메서드-그룹화\",\"children\":[\"$\",\"a\",null,{\"href\":\"#일관된-메서드-그룹화\",\"children\":\"일관된 메서드 그룹화\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"관련 메서드를 논리적 그룹으로 분류하여 코드 구조를 명확하게 했습니다:\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"class Robota {\\n  // 시스템 메시지 관리\\n  setSystemPrompt() { /* ... */ }\\n  setSystemMessages() { /* ... */ }\\n  addSystemMessage() { /* ... */ }\\n  \\n  // 함수 호출 관리\\n  setFunctionCallMode() { /* ... */ }\\n  configureFunctionCall() { /* ... */ }\\n  registerFunction() { /* ... */ }\\n  \\n  // 실행 메서드\\n  run() { /* ... */ }\\n  chat() { /* ... */ }\\n  \\n  // 내부 헬퍼 메서드\\n  private prepareContext() { /* ... */ }\\n  private handleFunctionCall() { /* ... */ }\\n}\\n\"}]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"에러-처리-개선\",\"children\":[\"$\",\"a\",null,{\"href\":\"#에러-처리-개선\",\"children\":\"에러 처리 개선\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"에러 처리가 다양한 상황에서 더 구체적이고 유용한 피드백을 제공하도록 개선되었습니다:\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"async handleFunctionCall(response, context, options): Promise\u003cstring\u003e {\\n  if (!response.functionCall || !response.functionCall.name) {\\n    throw new Error('함수 호출 정보가 누락되었습니다.');\\n  }\\n\\n  const functionName = response.functionCall.name;\\n  const fn = this.functions[functionName];\\n\\n  if (!fn) {\\n    throw new Error(`함수 '${functionName}'이(가) 등록되지 않았습니다.`);\\n  }\\n  \\n  try {\\n    // 함수 실행...\\n  } catch (error) {\\n    console.error(`함수 '${functionName}' 실행 중 오류 발생:`, error);\\n    throw error;\\n  }\\n}\\n\"}]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"테스트-개선\",\"children\":[\"$\",\"a\",null,{\"href\":\"#테스트-개선\",\"children\":\"테스트 개선\"}]}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"테스트-위치-및-구조\",\"children\":[\"$\",\"a\",null,{\"href\":\"#테스트-위치-및-구조\",\"children\":\"테스트 위치 및 구조\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"테스트 파일은 해당 구현 파일과 함께 배치하여 관리가 용이하도록 하였습니다:\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"packages/core/src/\\n  ├── memory.ts\\n  ├── memory.test.ts  // memory.ts에 대한 테스트\\n  ├── robota.ts\\n  └── robota.test.ts  // robota.ts에 대한 테스트\\n\"}]}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"테스트-범위-확대\",\"children\":[\"$\",\"a\",null,{\"href\":\"#테스트-범위-확대\",\"children\":\"테스트 범위 확대\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"다음 영역에서 테스트 커버리지가 향상되었습니다:\"}],\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"에지 케이스\"}],\": 비정상적인 입력과 경계 조건에 대한 테스트\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"오류 상황\"}],\": 예외 발생 시 올바르게 처리되는지 확인\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"통합 테스트\"}],\": 여러 컴포넌트가 함께 작동하는 시나리오 테스트\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"api-디자인-개선\",\"children\":[\"$\",\"a\",null,{\"href\":\"#api-디자인-개선\",\"children\":\"API 디자인 개선\"}]}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"일관된-명명-규칙\",\"children\":[\"$\",\"a\",null,{\"href\":\"#일관된-명명-규칙\",\"children\":\"일관된 명명 규칙\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"모든 API는 일관된 명명 규칙을 따릅니다:\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"클래스: PascalCase (예: \",[\"$\",\"code\",null,{\"children\":\"OpenAIProvider\"}],\")\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"메서드: camelCase (예: \",[\"$\",\"code\",null,{\"children\":\"registerFunction\"}],\", \",[\"$\",\"code\",null,{\"children\":\"setSystemPrompt\"}],\")\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"상수: UPPER_SNAKE_CASE (예: \",[\"$\",\"code\",null,{\"children\":\"DEFAULT_TIMEOUT\"}],\", \",[\"$\",\"code\",null,{\"children\":\"MAX_TOKENS\"}],\")\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"타입/인터페이스: PascalCase (예: \",[\"$\",\"code\",null,{\"children\":\"ToolResult\"}],\", \",[\"$\",\"code\",null,{\"children\":\"FunctionSchema\"}],\")\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"메서드-체이닝-지원\",\"children\":[\"$\",\"a\",null,{\"href\":\"#메서드-체이닝-지원\",\"children\":\"메서드 체이닝 지원\"}]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"// 이전:\\ntoolRegistry.register(tool1);\\ntoolRegistry.register(tool2);\\n\\n// 개선:\\ntoolRegistry\\n  .register(tool1)\\n  .register(tool2);\\n\"}]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"성능-개선\",\"children\":[\"$\",\"a\",null,{\"href\":\"#성능-개선\",\"children\":\"성능 개선\"}]}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"메모리-최적화\",\"children\":[\"$\",\"a\",null,{\"href\":\"#메모리-최적화\",\"children\":\"메모리 최적화\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"메모리 관리 시스템이 개선되어 대화 기록을 효율적으로 저장하고 검색할 수 있습니다:\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"class SimpleMemory implements Memory {\\n  private messages: Message[] = [];\\n  private maxMessages: number;\\n  \\n  constructor(options?: { maxMessages?: number }) {\\n    this.maxMessages = options?.maxMessages || 0;\\n  }\\n  \\n  addMessage(message: Message): void {\\n    this.messages.push(message);\\n    \\n    // 최대 메시지 수 제한 적용\\n    if (this.maxMessages \u003e 0 \u0026\u0026 this.messages.length \u003e this.maxMessages) {\\n      // 시스템 메시지는 항상 유지\\n      const systemMessages = this.messages.filter(m =\u003e m.role === 'system');\\n      const nonSystemMessages = this.messages.filter(m =\u003e m.role !== 'system');\\n      \\n      // 비시스템 메시지만 잘라냄\\n      const remainingCount = this.maxMessages - systemMessages.length;\\n      const trimmedNonSystemMessages = nonSystemMessages.slice(-remainingCount);\\n      \\n      // 시스템 메시지와 잘라낸 비시스템 메시지 합치기\\n      this.messages = [...systemMessages, ...trimmedNonSystemMessages];\\n    }\\n  }\\n}\\n\"}]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"결론\",\"children\":[\"$\",\"a\",null,{\"href\":\"#결론\",\"children\":\"결론\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"이러한 코드 개선을 통해 Robota 라이브러리는 다음과 같은 이점을 제공합니다:\"}],\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"더 나은 개발자 경험\"}],\": 직관적인 API와 명확한 문서화\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"향상된 타입 안전성\"}],\": 컴파일 타임에 오류 발견\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"더 높은 코드 품질\"}],\": 일관된 스타일과 설계 원칙\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"확장성\"}],\": 새로운 기능과 통합을 쉽게 추가할 수 있음\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"유지보수성\"}],\": 명확한 모듈 경계와 책임 분리\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"향후 개발 계획에는 추가 최적화, 더 많은 제공업체 지원, 그리고 고급 기능의 구현이 포함되어 있습니다.\"}]]]}]\n"])</script><script>self.__next_f.push([1,"c:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"code improvements - Robota\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"Robota 문서 및 API 참조\"}]]\n4:null\n"])</script><script>self.__next_f.push([1,""])</script></body></html>