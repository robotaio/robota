<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Robota 문서</title>
  <meta name="description" content="Robota API 문서">
  <link rel="stylesheet" href="/style.css">
  <script>
    // 페이지 로드 시 Docsify 라우팅으로 리다이렉트
    window.onload = function() {
      const currentPath = window.location.pathname;
      if (!currentPath.endsWith('/')) {
        const redirectPath = currentPath.includes('.html') 
          ? currentPath.replace('.html', '') 
          : currentPath;
        window.location.href = '/#' + redirectPath;
      } else {
        window.location.href = '/#' + currentPath;
      }
    };
  </script>
</head>
<body>
  <div id="content">
    # MCP 제공업체 (Model Context Protocol)

MCP(Model Context Protocol) 제공업체는 Model Context Protocol을 지원하는 다양한 AI 모델과 통합할 수 있도록 해줍니다. MCP는 AI 모델과의 상호작용을 위한 표준화된 프로토콜입니다.

## 특징

- Model Context Protocol을 지원하는 모든 모델과 호환
- 두 가지 통합 방식 지원: 직접 MCP 클라이언트 주입 또는 OpenAPI 스키마 기반 통합
- 함수 호출(Function Calling) 지원
- 스트리밍 응답 지원

## 설치

```bash
npm install @robota/mcp
```

## 사용법

### 클라이언트 주입 방식

`@modelcontextprotocol/sdk` 라이브러리를 사용하여 MCP 클라이언트를 생성하고 이를 제공업체에 주입하는 방식입니다.

```typescript
import { Robota, MCPProvider } from 'robota';
import { Client, StdioClientTransport } from '@modelcontextprotocol/sdk';

// MCP 클라이언트 생성
const transport = new StdioClientTransport(/* 설정 */);
const mcpClient = new Client(transport);

// MCP 제공업체 초기화
const provider = new MCPProvider({
  type: 'client',
  client: mcpClient,
  model: 'model-name', // 사용할 모델 이름
  temperature: 0.7
});

// Robota 인스턴스에 제공업체 연결
const robota = new Robota({ provider });

// 실행
const result = await robota.run('안녕하세요! 오늘 날씨가 어때요?');
```

### OpenAPI 스키마 방식

OpenAPI 3.0 스키마를 사용하여 MCP API와 통합하는 방식입니다.

```typescript
import { Robota, MCPProvider } from 'robota';

// OpenAPI 스키마 방식으로 MCP 제공업체 초기화
const provider = new MCPProvider({
  type: 'openapi',
  schema: 'https://example.com/mcp-api/openapi.json', // 또는 스키마 객체
  baseURL: 'https://api.example.com/v1',
  headers: {
    'Authorization': `Bearer ${process.env.MCP_API_KEY}`
  },
  model: 'model-name', // 사용할 모델 이름
  temperature: 0.7
});

// Robota 인스턴스에 제공업체 연결
const robota = new Robota({ provider });

// 실행
const result = await robota.run('안녕하세요! 함수 호출 테스트입니다.');
```

## 함수 호출 예제

MCP 제공업체에서 함수 호출을 사용하는 예제입니다.

```typescript
import { Robota, MCPProvider } from 'robota';
import { Client, StdioClientTransport } from '@modelcontextprotocol/sdk';

// MCP 클라이언트 생성
const transport = new StdioClientTransport(/* 설정 */);
const mcpClient = new Client(transport);

// MCP 제공업체 초기화
const provider = new MCPProvider({
  type: 'client',
  client: mcpClient,
  model: 'model-name'
});

// Robota 인스턴스 생성
const robota = new Robota({ provider });

// 함수 등록
robota.registerFunctions({
  getWeather: async (location: string) => {
    // 날씨 정보 조회 로직
    return { temperature: 22, condition: '맑음', location };
  }
});

// 실행
const result = await robota.run('서울의 날씨가 어때요?');
console.log(result); // AI가 getWeather 함수를 호출하고 결과를 응답에 포함합니다.
```

## 고급 설정

### 스트리밍 응답 사용

```typescript
import { Robota, MCPProvider } from 'robota';
import { Client, StdioClientTransport } from '@modelcontextprotocol/sdk';

// MCP 클라이언트 생성
const transport = new StdioClientTransport(/* 설정 */);
const mcpClient = new Client(transport);

// MCP 제공업체 초기화
const provider = new MCPProvider({
  type: 'client',
  client: mcpClient,
  model: 'model-name'
});

// Robota 인스턴스 생성
const robota = new Robota({ provider });

// 스트리밍 응답 처리
const stream = await robota.stream('긴 이야기를 해주세요.');

for await (const chunk of stream) {
  process.stdout.write(chunk.content || '');
}
```

## 주의사항

- MCP 제공업체를 사용할 때는 반드시 MCP 클라이언트 또는 OpenAPI 스키마를 제공해야 합니다.
- 클라이언트 타입(`type` 옵션)은 'client' 또는 'openapi' 중 하나여야 합니다.
- 사용하는 MCP 구현체에 따라 지원되는 기능이 다를 수 있습니다. 
  </div>
</body>
</html>