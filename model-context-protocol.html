<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Robota API ë¬¸ì„œ</title>
  <meta name="description" content="Robota API ë¬¸ì„œ">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsify@4/themes/vue.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ¤–</text></svg>">
  <style>
    :root {
      --theme-color: #42b983;
    }
    .markdown-section {
      max-width: 900px;
      padding: 30px;
    }
    .markdown-section code {
      background-color: #f8f8f8;
    }
  </style>
</head>
<body>
  <div class="markdown-section">
    <h1>ëª¨ë¸ ì»¨í…ìŠ¤íŠ¸ í”„ë¡œí† ì½œ (Model Context Protocol)</h1>
<p>ëª¨ë¸ ì»¨í…ìŠ¤íŠ¸ í”„ë¡œí† ì½œ(MCP)ì€ ë‹¤ì–‘í•œ AI ëª¨ë¸ê³¼ ì¼ê´€ëœ ë°©ì‹ìœ¼ë¡œ í†µì‹ í•˜ê¸° ìœ„í•œ Robotaì˜ í‘œì¤€í™”ëœ ë°©ë²•ì…ë‹ˆë‹¤. ì´ í”„ë¡œí† ì½œì„ í†µí•´ ì„œë¡œ ë‹¤ë¥¸ AI ì œê³µì—…ì²´ ê°„ì˜ í˜¸í™˜ì„±ì„ ë³´ì¥í•˜ê³ , ëª¨ë¸ ê°„ ì „í™˜ì„ ì‰½ê²Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h2>í”„ë¡œí† ì½œ ê°œìš”</h2>
<p>MCPëŠ” ë‹¤ìŒ ìš”ì†Œë¡œ êµ¬ì„±ë©ë‹ˆë‹¤:</p>
<ol>
<li><strong>ë©”ì‹œì§€ í˜•ì‹</strong> - ì‚¬ìš©ìì™€ AI ê°„ì˜ ëŒ€í™”ë¥¼ êµ¬ì¡°í™”í•˜ëŠ” ë°©ë²•</li>
<li><strong>í•¨ìˆ˜ ìŠ¤í‚¤ë§ˆ</strong> - í•¨ìˆ˜ì™€ ë„êµ¬ì˜ ì •ì˜ë¥¼ í‘œí˜„í•˜ëŠ” ë°©ë²•</li>
<li><strong>ì»¨í…ìŠ¤íŠ¸ ê´€ë¦¬</strong> - ëŒ€í™” ì»¨í…ìŠ¤íŠ¸ì™€ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ” ë°©ë²•</li>
<li><strong>ì‘ë‹µ í˜•ì‹</strong> - AIì˜ ì‘ë‹µì„ êµ¬ì¡°í™”í•˜ëŠ” ë°©ë²•</li>
</ol>
<h2>ë©”ì‹œì§€ í˜•ì‹</h2>
<p>MCPì—ì„œ ë©”ì‹œì§€ëŠ” ë‹¤ìŒê³¼ ê°™ì€ êµ¬ì¡°ë¥¼ ê°€ì§‘ë‹ˆë‹¤:</p>
<pre><code class="language-typescript">interface Message {
  role: &#39;user&#39; | &#39;assistant&#39; | &#39;system&#39; | &#39;function&#39;;
  content: string;
  name?: string;  // function í˜¸ì¶œì¸ ê²½ìš° í•¨ìˆ˜ ì´ë¦„
  functionCall?: {
    name: string;
    arguments: Record&lt;string, any&gt;;
  };
  functionResult?: any;
}
</code></pre>
<p>ì˜ˆì‹œ:</p>
<pre><code class="language-typescript">// ì‚¬ìš©ì ë©”ì‹œì§€
const userMessage: Message = {
  role: &#39;user&#39;,
  content: &#39;ì„œìš¸ì˜ ë‚ ì”¨ê°€ ì–´ë•Œ?&#39;
};

// ì‹œìŠ¤í…œ ë©”ì‹œì§€
const systemMessage: Message = {
  role: &#39;system&#39;,
  content: &#39;ë‹¹ì‹ ì€ ë„ì›€ì´ ë˜ëŠ” AI ë¹„ì„œì…ë‹ˆë‹¤.&#39;
};

// í•¨ìˆ˜ í˜¸ì¶œì„ í¬í•¨í•œ ì–´ì‹œìŠ¤í„´íŠ¸ ë©”ì‹œì§€
const assistantMessage: Message = {
  role: &#39;assistant&#39;,
  content: &#39;ì„œìš¸ì˜ ë‚ ì”¨ë¥¼ í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤.&#39;,
  functionCall: {
    name: &#39;getWeather&#39;,
    arguments: { location: &#39;ì„œìš¸&#39; }
  }
};

// í•¨ìˆ˜ ê²°ê³¼ ë©”ì‹œì§€
const functionMessage: Message = {
  role: &#39;function&#39;,
  name: &#39;getWeather&#39;,
  content: JSON.stringify({ temperature: 25, condition: &#39;ë§‘ìŒ&#39; })
};
</code></pre>
<h2>í•¨ìˆ˜ ìŠ¤í‚¤ë§ˆ</h2>
<p>MCPëŠ” í•¨ìˆ˜ë¥¼ JSON ìŠ¤í‚¤ë§ˆ í˜•ì‹ìœ¼ë¡œ ì •ì˜í•©ë‹ˆë‹¤:</p>
<pre><code class="language-typescript">interface FunctionSchema {
  name: string;
  description?: string;
  parameters: {
    type: &#39;object&#39;;
    properties: Record&lt;string, {
      type: string;
      description?: string;
      enum?: any[];
      default?: any;
      // ì¶”ê°€ JSON ìŠ¤í‚¤ë§ˆ ì†ì„±
    }&gt;;
    required?: string[];
  };
}
</code></pre>
<p>ì˜ˆì‹œ:</p>
<pre><code class="language-typescript">const weatherFunctionSchema: FunctionSchema = {
  name: &#39;getWeather&#39;,
  description: &#39;íŠ¹ì • ìœ„ì¹˜ì˜ í˜„ì¬ ë‚ ì”¨ ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤&#39;,
  parameters: {
    type: &#39;object&#39;,
    properties: {
      location: {
        type: &#39;string&#39;,
        description: &#39;ë‚ ì”¨ë¥¼ í™•ì¸í•  ë„ì‹œ ì´ë¦„ (ì˜ˆ: ì„œìš¸, ë¶€ì‚°)&#39;
      },
      unit: {
        type: &#39;string&#39;,
        description: &#39;ì˜¨ë„ ë‹¨ìœ„&#39;,
        enum: [&#39;celsius&#39;, &#39;fahrenheit&#39;],
        default: &#39;celsius&#39;
      }
    },
    required: [&#39;location&#39;]
  }
};
</code></pre>
<h2>ì»¨í…ìŠ¤íŠ¸ ê´€ë¦¬</h2>
<p>MCPì—ì„œ ì»¨í…ìŠ¤íŠ¸ëŠ” ëŒ€í™”ì˜ ìƒíƒœë¥¼ ë‚˜íƒ€ë‚´ë©°, ë‹¤ìŒ ìš”ì†Œë¥¼ í¬í•¨í•©ë‹ˆë‹¤:</p>
<pre><code class="language-typescript">interface Context {
  messages: Message[];            // ì§€ê¸ˆê¹Œì§€ì˜ ëŒ€í™” ê¸°ë¡
  functions?: FunctionSchema[];   // ì‚¬ìš© ê°€ëŠ¥í•œ í•¨ìˆ˜ ëª©ë¡
  systemPrompt?: string;          // ë‹¨ì¼ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸
  systemMessages?: Message[];     // ì—¬ëŸ¬ ì‹œìŠ¤í…œ ë©”ì‹œì§€
  metadata?: Record&lt;string, any&gt;; // ì¶”ê°€ ë©”íƒ€ë°ì´í„°
}
</code></pre>
<h3>ì‹œìŠ¤í…œ ë©”ì‹œì§€ ê´€ë¦¬</h3>
<p>RobotaëŠ” ë‹¨ì¼ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ì™€ ì—¬ëŸ¬ ì‹œìŠ¤í…œ ë©”ì‹œì§€ë¥¼ ëª¨ë‘ ì§€ì›í•©ë‹ˆë‹¤:</p>
<pre><code class="language-typescript">// ë‹¨ì¼ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ì„¤ì •
robota.setSystemPrompt(&#39;ë‹¹ì‹ ì€ ë„ì›€ì´ ë˜ëŠ” AI ì–´ì‹œìŠ¤í„´íŠ¸ì…ë‹ˆë‹¤.&#39;);

// ì—¬ëŸ¬ ì‹œìŠ¤í…œ ë©”ì‹œì§€ ì„¤ì •
robota.setSystemMessages([
  { role: &#39;system&#39;, content: &#39;ë‹¹ì‹ ì€ ì „ë¬¸ ë°ì´í„° ë¶„ì„ê°€ì…ë‹ˆë‹¤.&#39; },
  { role: &#39;system&#39;, content: &#39;ì‚¬ìš©ìê°€ ë°ì´í„° ë¶„ì„ ê´€ë ¨ ì§ˆë¬¸ì„ í•  ë•Œë§ˆë‹¤ ë‹¨ê³„ë³„ë¡œ ì„¤ëª…í•´ì£¼ì„¸ìš”.&#39; }
]);

// ê¸°ì¡´ ì‹œìŠ¤í…œ ë©”ì‹œì§€ì— ì¶”ê°€
robota.addSystemMessage(&#39;í•­ìƒ ì •í™•í•œ ì •ë³´ë¥¼ ì œê³µí•˜ë ¤ê³  ë…¸ë ¥í•˜ì„¸ìš”.&#39;);
</code></pre>
<p>Robota ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ì‹œ ì‹œìŠ¤í…œ ë©”ì‹œì§€ë¥¼ ì„¤ì •í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤:</p>
<pre><code class="language-typescript">// ë‹¨ì¼ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ë¡œ ì´ˆê¸°í™”
const robota1 = new Robota({
  provider: provider,
  systemPrompt: &#39;ë‹¹ì‹ ì€ ë„ì›€ì´ ë˜ëŠ” AI ì–´ì‹œìŠ¤í„´íŠ¸ì…ë‹ˆë‹¤.&#39;
});

// ì—¬ëŸ¬ ì‹œìŠ¤í…œ ë©”ì‹œì§€ë¡œ ì´ˆê¸°í™”
const robota2 = new Robota({
  provider: provider,
  systemMessages: [
    { role: &#39;system&#39;, content: &#39;ë‹¹ì‹ ì€ ì „ë¬¸ ë°ì´í„° ë¶„ì„ê°€ì…ë‹ˆë‹¤.&#39; },
    { role: &#39;system&#39;, content: &#39;ì‚¬ìš©ìê°€ ë°ì´í„° ë¶„ì„ ê´€ë ¨ ì§ˆë¬¸ì„ í•  ë•Œë§ˆë‹¤ ë‹¨ê³„ë³„ë¡œ ì„¤ëª…í•´ì£¼ì„¸ìš”.&#39; }
  ]
});
</code></pre>
<h2>ì‘ë‹µ í˜•ì‹</h2>
<p>ëª¨ë¸ì˜ ì‘ë‹µì€ ë‹¤ìŒê³¼ ê°™ì€ êµ¬ì¡°ë¡œ í‘œì¤€í™”ë©ë‹ˆë‹¤:</p>
<pre><code class="language-typescript">interface ModelResponse {
  content?: string;               // í…ìŠ¤íŠ¸ ì‘ë‹µ
  functionCall?: {                // í•¨ìˆ˜ í˜¸ì¶œ (ìˆëŠ” ê²½ìš°)
    name: string;
    arguments: Record&lt;string, any&gt;;
  };
  usage?: {                       // í† í° ì‚¬ìš©ëŸ‰ ì •ë³´
    promptTokens: number;
    completionTokens: number;
    totalTokens: number;
  };
  metadata?: Record&lt;string, any&gt;; // ì¶”ê°€ ë©”íƒ€ë°ì´í„°
}
</code></pre>
<h2>ì œê³µì—…ì²´ ê°„ í”„ë¡œí† ì½œ ë³€í™˜</h2>
<p>RobotaëŠ” ê° AI ì œê³µì—…ì²´ì˜ ê³ ìœ í•œ API í˜•ì‹ê³¼ MCP ê°„ì˜ ë³€í™˜ì„ ìë™ìœ¼ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, OpenAIì™€ Anthropicì€ ì„œë¡œ ë‹¤ë¥¸ ë©”ì‹œì§€ í˜•ì‹ì„ ì‚¬ìš©í•˜ì§€ë§Œ, RobotaëŠ” ì´ë¥¼ MCPë¡œ í‘œì¤€í™”í•©ë‹ˆë‹¤.</p>
<pre><code class="language-typescript">// OpenAI í˜•ì‹ì—ì„œ MCPë¡œ ë³€í™˜
function openaiToMCP(openaiResponse) {
  return {
    content: openaiResponse.choices[0].message.content,
    functionCall: openaiResponse.choices[0].message.function_call
      ? {
          name: openaiResponse.choices[0].message.function_call.name,
          arguments: JSON.parse(openaiResponse.choices[0].message.function_call.arguments)
        }
      : undefined,
    usage: {
      promptTokens: openaiResponse.usage.prompt_tokens,
      completionTokens: openaiResponse.usage.completion_tokens,
      totalTokens: openaiResponse.usage.total_tokens
    }
  };
}

// MCPì—ì„œ Anthropic í˜•ì‹ìœ¼ë¡œ ë³€í™˜
function mcpToAnthropic(mcpContext) {
  return {
    messages: mcpContext.messages.map(message =&gt; {
      if (message.role === &#39;user&#39;) {
        return { role: &#39;human&#39;, content: message.content };
      } else if (message.role === &#39;assistant&#39;) {
        return { role: &#39;assistant&#39;, content: message.content };
      }
      // ê¸°íƒ€ ë³€í™˜ ë¡œì§
    }),
    system: mcpContext.systemPrompt
  };
}
</code></pre>
<h2>ì»¤ìŠ¤í…€ ëª¨ë¸ í†µí•©í•˜ê¸°</h2>
<p>ìƒˆë¡œìš´ AI ëª¨ë¸ì„ Robotaì— í†µí•©í•˜ë ¤ë©´ í•´ë‹¹ ëª¨ë¸ì˜ APIì™€ MCP ê°„ì˜ ë³€í™˜ ë¡œì§ì„ êµ¬í˜„í•´ì•¼ í•©ë‹ˆë‹¤:</p>
<pre><code class="language-typescript">import { BaseProvider, ModelContextProtocol } from &#39;robota&#39;;

class CustomModelProvider extends BaseProvider implements ModelContextProtocol {
  // MCP ì»¨í…ìŠ¤íŠ¸ë¥¼ ëª¨ë¸ ê³ ìœ  í˜•ì‹ìœ¼ë¡œ ë³€í™˜
  convertContextToModelFormat(context) {
    // ë³€í™˜ ë¡œì§ êµ¬í˜„
    return customFormat;
  }

  // ëª¨ë¸ ì‘ë‹µì„ MCP í˜•ì‹ìœ¼ë¡œ ë³€í™˜
  convertModelResponseToMCP(modelResponse) {
    // ë³€í™˜ ë¡œì§ êµ¬í˜„
    return mcpResponse;
  }
  
  // ê¸°íƒ€ í•„ìš”í•œ ë©”ì„œë“œ êµ¬í˜„
}
</code></pre>
<h2>MCPì˜ ì´ì </h2>
<ol>
<li><strong>ì œê³µì—…ì²´ ë…ë¦½ì„±</strong> - ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œë¥¼ ë³€ê²½í•˜ì§€ ì•Šê³  ë‹¤ë¥¸ AI ëª¨ë¸ë¡œ ì „í™˜ ê°€ëŠ¥</li>
<li><strong>í‘œì¤€í™”ëœ ì¸í„°í˜ì´ìŠ¤</strong> - ì¼ê´€ëœ ë°©ì‹ìœ¼ë¡œ ëª¨ë“  AI ëª¨ë¸ê³¼ ìƒí˜¸ì‘ìš©</li>
<li><strong>í™•ì¥ì„±</strong> - ìƒˆë¡œìš´ ëª¨ë¸ê³¼ ì œê³µì—…ì²´ë¥¼ ì‰½ê²Œ í†µí•©</li>
<li><strong>ì´ì‹ì„±</strong> - ë‹¤ì–‘í•œ í™˜ê²½ì—ì„œ ë™ì¼í•œ ì½”ë“œë¥¼ ì¬ì‚¬ìš©</li>
</ol>

  </div>
</body>
</html>